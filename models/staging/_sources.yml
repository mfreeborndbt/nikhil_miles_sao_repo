version: 2

sources:
  - name: noaa_weather
    database: SNOWFLAKE_PUBLIC_DATA_FREE
    schema: PUBLIC_DATA_FREE
    description: >
      NOAA weather data from Snowflake's free public dataset.
      These are VIEWS, so we must specify loaded_at_field for SAO
      to correctly detect data freshness.
    tables:
      - name: NOAA_WEATHER_METRICS_ATTRIBUTES_PIT
        description: Metadata about weather variables (measurement types, units, etc.)
        loaded_at_field: _effective_start_timestamp
        freshness:
          warn_after:
            count: 48
            period: hour
          error_after:
            count: 72
            period: hour

      - name: NOAA_WEATHER_METRICS_TIMESERIES_PIT
        description: >
          Weather time series data with actual readings.
          Updates approximately every 20-24 hours.
        loaded_at_field: _effective_start_timestamp
        freshness:
          warn_after:
            count: 24
            period: hour
          error_after:
            count: 48
            period: hour

      - name: NOAA_WEATHER_STATION_INDEX_PIT
        description: Weather station metadata (location, network, etc.)
        loaded_at_field: _effective_start_timestamp
        freshness:
          warn_after:
            count: 48
            period: hour
          error_after:
            count: 72
            period: hour